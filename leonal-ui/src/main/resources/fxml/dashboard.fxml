<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.NumberAxis?>

<VBox alignment="TOP_CENTER" spacing="40.0" stylesheets="@/css/styles.css" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.leonal.ui.controller.DashboardController">
   <padding>
      <Insets bottom="50.0" left="50.0" right="50.0" top="50.0" />
   </padding>
   <children>
      <!-- Dashboard Logo -->
      <ImageView fitHeight="120.0" fitWidth="350.0" pickOnBounds="true" preserveRatio="true">
         <image>
            <Image url="@/images/logo.png" />
         </image>
         <VBox.margin>
            <Insets bottom="10.0" />
         </VBox.margin>
      </ImageView>
      
      <VBox alignment="CENTER" spacing="10.0">
         <children>
            <Label fx:id="lblWelcome" styleClass="title-label" text="Â¡Hola!" />
            <Label styleClass="subtitle-label" text="Â¿QuÃ© desea hacer hoy?" />
         </children>
      </VBox>
      
      <HBox alignment="CENTER" spacing="20.0">
         <children>
            <!-- KPI Ingresos -->
            <VBox styleClass="card" alignment="CENTER" minWidth="200" spacing="5">
               <Label text="ðŸ’° Ingresos Hoy" style="-fx-font-weight: bold; -fx-text-fill: #555;" />
               <Label fx:id="lblIngresosHoy" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #27ae60;" />
            </VBox>
            
            <!-- KPI Ordenes -->
            <VBox styleClass="card" alignment="CENTER" minWidth="200" spacing="5">
               <Label text="ðŸ§ª Ã“rdenes Hoy" style="-fx-font-weight: bold; -fx-text-fill: #555;" />
               <Label fx:id="lblOrdenesHoy" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2980b9;" />
            </VBox>
            
            <!-- KPI Pendientes -->
            <VBox styleClass="card" alignment="CENTER" minWidth="200" spacing="5">
               <Label text="â³ Pendientes" style="-fx-font-weight: bold; -fx-text-fill: #555;" />
               <Label fx:id="lblPendientes" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e67e22;" />
            </VBox>
         </children>
      </HBox>

      <BarChart fx:id="barChartSemana" title="Ã“rdenes Ãšltima Semana" legendVisible="false" prefHeight="300" animated="false">
        <xAxis>
          <CategoryAxis label="DÃ­a" />
        </xAxis>
        <yAxis>
          <NumberAxis label="Cantidad" />
        </yAxis>
      </BarChart>

      <FlowPane alignment="CENTER" hgap="30.0" vgap="30.0">
         <children>
            <!-- Card Pacientes -->
            <Button mnemonicParsing="false" onAction="#goPacientes" prefHeight="160.0" prefWidth="250.0" styleClass="action-card">
               <graphic>
                  <VBox alignment="CENTER" spacing="10.0">
                     <children>
                        <Label style="-fx-font-size: 40px;" text="ðŸ‘¥" /> <!-- Emoji as icon for now -->
                        <Label style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #333;" text="Pacientes" />
                        <Label style="-fx-text-fill: #888;" text="Registrar y buscar pacientes" />
                     </children>
                  </VBox>
               </graphic>
            </Button>
            
            <!-- Card Ordenes -->
            <Button mnemonicParsing="false" onAction="#goOrdenes" prefHeight="160.0" prefWidth="250.0" styleClass="action-card">
               <graphic>
                  <VBox alignment="CENTER" spacing="10.0">
                     <children>
                        <Label style="-fx-font-size: 40px;" text="ðŸ§ª" />
                        <Label style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #333;" text="Ã“rdenes" />
                        <Label style="-fx-text-fill: #888;" text="Nueva orden de laboratorio" />
                     </children>
                  </VBox>
               </graphic>
            </Button>
            
            <!-- Card Catalogo -->
            <Button mnemonicParsing="false" onAction="#goExamenes" prefHeight="160.0" prefWidth="250.0" styleClass="action-card">
               <graphic>
                  <VBox alignment="CENTER" spacing="10.0">
                     <children>
                        <Label style="-fx-font-size: 40px;" text="ðŸ“‹" />
                        <Label style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #333;" text="CatÃ¡logo ExÃ¡menes" />
                        <Label style="-fx-text-fill: #888;" text="Gestionar pruebas y precios" />
                     </children>
                  </VBox>
               </graphic>
            </Button>
         </children>
      </FlowPane>
   </children>
</VBox>
