<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.leonal.ui.controller.CajaController"
            prefHeight="800" prefWidth="1000" style="-fx-font-family: 'Segoe UI'">
    <VBox AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0" spacing="10" style="-fx-padding: 15">
        <!-- Encabezado -->
        <HBox spacing="10" style="-fx-border-color: #ddd; -fx-border-width: 0 0 2 0; -fx-padding: 10 0 10 0">
            <Label text="GESTIÃ“N DE CAJA" style="-fx-font-size: 20; -fx-font-weight: bold"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="Estado:" style="-fx-font-weight: bold"/>
            <Label fx:id="lblEstadoCaja" text="CERRADA" style="-fx-text-fill: red; -fx-font-size: 14"/>
        </HBox>

        <!-- Panel de Apertura -->
        <TitledPane text="Apertura de Caja" collapsible="false" style="-fx-padding: 10">
            <HBox spacing="20" style="-fx-padding: 10">
                <VBox spacing="5">
                    <Label text="Monto Inicial"/>
                    <TextField fx:id="txtMontoInicial" prefWidth="150"/>
                </VBox>
                <VBox spacing="5">
                    <Label text="Hora Apertura"/>
                    <Label fx:id="lblHoraApertura" text="-"/>
                </VBox>
                <Button fx:id="btnAbrirCaja" text="Abrir Caja" onAction="#handleAbrirCaja" style="-fx-padding: 10"/>
            </HBox>
        </TitledPane>

        <!-- Panel de Cierre -->
        <TitledPane text="Cierre de Caja" collapsible="false" style="-fx-padding: 10">
            <GridPane hgap="10" vgap="10" style="-fx-padding: 10">
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>
                <ColumnConstraints percentWidth="25"/>

                <Label text="Total Ingresos:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <Label fx:id="lblTotalIngresos" text="0.00" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-font-weight: bold"/>

                <Label text="Total Egresos:" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                <Label fx:id="lblTotalEgresos" text="0.00" GridPane.rowIndex="0" GridPane.columnIndex="3" style="-fx-font-weight: bold"/>

                <Label text="Monto Final:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="txtMontoFinal" GridPane.rowIndex="1" GridPane.columnIndex="1" onKeyReleased="#handleCalcularDiferencia"/>

                <Label text="Diferencia:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <TextField fx:id="txtDiferencia" GridPane.rowIndex="1" GridPane.columnIndex="3" editable="false"/>

                <Label text="Observaciones:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <TextArea fx:id="txtaObservacionesCierre" wrapText="true" prefRowCount="3" GridPane.rowIndex="2" GridPane.columnIndex="1" GridPane.columnSpan="3"/>

                <HBox spacing="10" GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.columnSpan="4">
                    <Button fx:id="btnCerrarCaja" text="Cerrar Caja" onAction="#handleCerrarCaja" style="-fx-padding: 10"/>
                </HBox>
            </GridPane>
        </TitledPane>

        <!-- Tabla de cajas -->
        <TitledPane text="Historial de Cajas" collapsible="false" VBox.vgrow="ALWAYS">
            <TableView fx:id="tblCajas" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colCajero" text="Cajero" prefWidth="150"/>
                    <TableColumn fx:id="colFecha" text="Fecha" prefWidth="120"/>
                    <TableColumn fx:id="colHoraApertura" text="Hora Apertura" prefWidth="150"/>
                    <TableColumn fx:id="colHoraCierre" text="Hora Cierre" prefWidth="150"/>
                    <TableColumn fx:id="colEstado" text="Estado" prefWidth="100"/>
                    <TableColumn fx:id="colMontoInicial" text="Monto Inicial" prefWidth="120"/>
                    <TableColumn fx:id="colMontoFinal" text="Monto Final" prefWidth="120"/>
                </columns>
            </TableView>
        </TitledPane>
    </VBox>
</AnchorPane>
