<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.leonal.ui.controller.NuevaOrdenController"
      spacing="15" styleClass="card" prefWidth="900" prefHeight="650">
    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>

    <!-- Header -->
    <Label text="Nueva Orden" styleClass="title-label"/>
    <Separator/>

    <!-- SecciÃ³n Paciente -->
    <VBox spacing="10">
        <Label text="Datos del Paciente" styleClass="header-label"/>
        
        <HBox spacing="15" alignment="CENTER_LEFT">
            <RadioButton fx:id="rbPacienteExistente" text="Paciente Existente" selected="true"/>
            <RadioButton fx:id="rbPacienteNuevo" text="Nuevo Paciente"/>
        </HBox>
        
        <!-- Panel Paciente Existente -->
        <HBox fx:id="panelBuscarPaciente" spacing="10" alignment="CENTER_LEFT">
            <TextField fx:id="txtBuscarPaciente" promptText="Buscar por cÃ©dula o nombre..." prefWidth="300"/>
            <Button text="ðŸ” Buscar" onAction="#buscarPaciente" styleClass="button button-secondary"/>
            <Label fx:id="lblPacienteSeleccionado" text="" style="-fx-font-weight: bold; -fx-text-fill: #0078D7;"/>
        </HBox>
        
        <!-- Panel Nuevo Paciente -->
        <VBox fx:id="panelNuevoPaciente" spacing="10" visible="false" managed="false">
            <HBox spacing="10">
                <VBox spacing="5" HBox.hgrow="NEVER">
                    <Label text="Tipo Doc." styleClass="form-label"/>
                    <ComboBox fx:id="cmbTipoDoc" prefWidth="80"/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="NÃºmero Documento" styleClass="form-label"/>
                    <TextField fx:id="txtNumeroDoc" promptText="NÃºmero de documento"/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Nombre Completo" styleClass="form-label"/>
                    <TextField fx:id="txtNombrePaciente" promptText="Nombre completo del paciente"/>
                </VBox>
            </HBox>
            <HBox spacing="10">
                <VBox spacing="5">
                    <Label text="Fecha Nacimiento" styleClass="form-label"/>
                    <DatePicker fx:id="dpFechaNac" prefWidth="150"/>
                </VBox>
                <VBox spacing="5">
                    <Label text="Sexo" styleClass="form-label"/>
                    <ComboBox fx:id="cmbSexo" prefWidth="80"/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="TelÃ©fono" styleClass="form-label"/>
                    <TextField fx:id="txtTelefono" promptText="TelÃ©fono"/>
                </VBox>
            </HBox>
        </VBox>
    </VBox>

    <Separator/>

    <!-- SecciÃ³n ExÃ¡menes -->
    <VBox spacing="10" VBox.vgrow="ALWAYS">
        <Label text="ExÃ¡menes" styleClass="header-label"/>
        
        <HBox spacing="15" VBox.vgrow="ALWAYS">
            <!-- ExÃ¡menes Disponibles -->
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Disponibles" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtFiltroExamen" promptText="Filtrar exÃ¡menes..."/>
                <ListView fx:id="listExamenesDisponibles" VBox.vgrow="ALWAYS"/>
            </VBox>
            
            <!-- Botones -->
            <VBox spacing="10" alignment="CENTER">
                <Button text="â†’ Agregar" onAction="#agregarExamen" styleClass="button button-primary" prefWidth="100"/>
                <Button text="â† Quitar" onAction="#quitarExamen" styleClass="button button-secondary" prefWidth="100"/>
            </VBox>
            
            <!-- ExÃ¡menes Seleccionados -->
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Label text="Seleccionados" style="-fx-font-weight: bold;"/>
                <ListView fx:id="listExamenesSeleccionados" VBox.vgrow="ALWAYS"/>
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Label text="Total:" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <Label fx:id="txtMontoTotal" text="0" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                </HBox>
            </VBox>
        </HBox>
    </VBox>

    <Separator/>

    <!-- Botones de AcciÃ³n -->
    <HBox spacing="15" alignment="CENTER_RIGHT">
        <Button text="Cancelar" onAction="#cancelar" styleClass="button button-secondary"/>
        <Button fx:id="btnGuardar" text="ðŸ’¾ Guardar Orden" onAction="#guardarOrden" styleClass="button button-primary"/>
    </HBox>
</VBox>
